<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å…¨é‡æ¬²æœ›æ¸…å• - ç»ˆæç‰ˆ</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() { emailjs.init("k0Jq1yQ1_Y1PQF_lu"); })();
    </script>
    <style>
        :root { --primary: #ff0055; --bg: #050505; --card: #121212; --nav: #1a1a1a; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: #fff; margin: 0; padding-bottom: 100px; scroll-behavior: smooth; }
        
        /* é¡¶éƒ¨å›ºå®šå¯¼èˆª */
        .nav-bar { position: sticky; top: 0; background: var(--nav); z-index: 100; display: flex; overflow-x: auto; padding: 10px; gap: 10px; border-bottom: 1px solid #333; white-space: nowrap; }
        .nav-item { padding: 6px 12px; background: #222; border-radius: 15px; font-size: 12px; color: #999; text-decoration: none; }
        .nav-item:active { background: var(--primary); color: #fff; }

        .header { padding: 30px 20px; text-align: center; }
        .header h1 { font-size: 26px; color: var(--primary); text-shadow: 0 0 10px rgba(255,0,85,0.5); margin: 0; }
        .header p { color: #666; font-size: 13px; margin-top: 10px; }

        .section { margin: 20px 10px; background: var(--card); border-radius: 20px; padding: 15px; border: 1px solid #222; }
        .section-title { font-size: 16px; color: var(--primary); margin-bottom: 15px; padding-left: 10px; border-left: 3px solid var(--primary); }

        .bottle-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
        .bottle-item { display: flex; flex-direction: column; align-items: center; padding: 10px 0; border-radius: 10px; transition: 0.1s; }
        .bottle-item:active { background: rgba(255,255,255,0.05); }
        .bottle-svg { width: 45px; height: 65px; }
        .bottle-fill { transition: height 0.3s ease; fill: var(--primary); }
        .label { margin-top: 8px; font-size: 11px; color: #888; text-align: center; width: 90%; line-height: 1.2; }

        /* åº•éƒ¨å›ºå®šæ“ä½œæ  */
        .footer-actions { position: fixed; bottom: 0; left: 0; right: 0; background: rgba(20,20,20,0.95); padding: 15px; border-top: 1px solid #333; display: flex; gap: 10px; justify-content: center; backdrop-filter: blur(10px); }
        .btn { padding: 12px 25px; border-radius: 25px; border: none; font-size: 15px; font-weight: bold; cursor: pointer; flex: 1; max-width: 200px; }
        .btn-main { background: var(--primary); color: #fff; }
        .btn-home { background: #333; color: #ccc; }

        .view-mode-tag { background: #ff758f; color: white; padding: 5px; text-align: center; font-size: 12px; display: none; }
    </style>
</head>
<body>

    <div id="view-tag" class="view-mode-tag">æ­£åœ¨æŸ¥çœ‹å¥½å‹åˆ†äº«çš„ç»ˆææ¸…å•</div>

    <div class="nav-bar">
        <a href="#cat1" class="nav-item">å£éƒ¨</a>
        <a href="#cat2" class="nav-item">ä½“ä½</a>
        <a href="#cat3" class="nav-item">é«˜æ½®</a>
        <a href="#cat4" class="nav-item">ç¾è¾±</a>
        <a href="#cat5" class="nav-item">æ†ç»‘</a>
        <a href="#cat6" class="nav-item">å® ç‰©</a>
        <a href="#cat7" class="nav-item">è§’è‰²</a>
        <a href="#cat8" class="nav-item">å¤šäºº</a>
        <a href="#cat9" class="nav-item">æš´éœ²</a>
        <a href="#cat10" class="nav-item">æç«¯</a>
        <a href="#cat11" class="nav-item">åœºæ‰€</a>
        <a href="#cat12" class="nav-item">å°ä¼—</a>
    </div>

    <div class="header">
        <h1>ç»ˆææ¬²æœ›æ¸…å•</h1>
        <p>12å¤§åˆ†ç±»ï¼Œå…±è®¡ç™¾ä½™é¡¹æ¢ç´¢é¡¹ç›®</p>
    </div>

    <div id="main-container"></div>

    <div class="footer-actions">
        <button class="btn btn-home" onclick="location.href='index.html'">å›ä¸»é¡µ</button>
        <button class="btn btn-main" id="share-btn" onclick="handleShare()">ä¿å­˜å¹¶ç”Ÿæˆ</button>
    </div>

    <script>
        const ALL_DATA = {
            c1: { id: "cat1", title: "1. å‰æˆ/å£éƒ¨/äº²å»", items: ["èˆŒå»", "ç§è‰è“", "è¢«èˆ”è€³æœµ", "è¢«èˆ”ä¹³å¤´", "æŒ‡äº¤/å¸®æ’¸", "è¢«å£", "å¸®å¯¹æ–¹å£", "å£äº¤", "æ·±å–‰", "å£çˆ†", "åç²¾", "é¢œå°„", "èˆ”é˜´/èˆ”è‚›", "èˆ”è¶³/èˆ”è„š"] },
            c2: { id: "cat2", title: "2. ä½“ä½/æ€§äº¤ç›¸å…³", items: ["å¥³ä¸Šä½", "ä¼ æ•™å£«", "åå…¥å¼", "è‚›äº¤", "ä¹³äº¤", "69å¼", "æ— å¥—", "å†…å°„/ä¸­å‡º", "æ½®å¹", "æ­£å¸¸æ€§çˆ±"] },
            c3: { id: "cat3", title: "3. é«˜æ½®/æ§åˆ¶/æ¿€çƒˆ", items: ["å¼ºåˆ¶é«˜æ½®", "è¾¹ç¼˜æ§åˆ¶", "é«˜æ½®ç¦æ­¢", "æ½®å¹å¤±ç¦", "æ€§çª’æ¯", "è‡ªæ…°å±•ç¤º", "è·³è›‹", "å™¨å…·æŠ˜ç£¨"] },
            c4: { id: "cat4", title: "4. ç¾è¾±/è¨€è¯­/å¿ƒç†", items: ["è¨€è¯­ç¾è¾±", "äººæ ¼ä¾®è¾±", "ä¸‹æµè¯", "è€³å…‰", "è¯­è¨€ä¾®è¾±", "ç²¾ç¥æ§åˆ¶", "å‚¬çœ ", "èƒè¿«", "è§†å¥¸", "ç—´æ±‰"] },
            c5: { id: "cat5", title: "5. æ†ç»‘/æŸç¼š/é“å…·", items: ["ç»³ç¼š/æ†ç»‘", "åŠç¼š/æ‹˜æŸ", "è´æ“å¸¦", "é¡¹åœˆ", "å£çƒ", "çœ¼ç½©/è’™çœ¼", "èƒ¶è¡£", "ä¹³å¤¹/é˜´å¤¹", "è‚›å¡", "ç©¿åˆºç©¿ç¯", "æ»´èœ¡", "ç”µå‡»", "é’ˆåˆº/é­æ‰“", "SP/æ‰“å±è‚¡", "è¸©è¸", "ä¹³å¤´è™å¾…"] },
            c6: { id: "cat6", title: "6. å® ç‰©/åŠ¨ç‰©åŒ–/é¥²å…»", items: ["çˆ¬è¡Œ", "é•¿æœŸ/çŸ­æœŸåœˆå…»", "K9çŠ¬åŒ–", "é›ç‹—å¼", "éª‘ä¹˜", "ç©¿æˆ´å…½å°¾", "å–‚é£Ÿ"] },
            c7: { id: "cat7", title: "7. è§’è‰²æ‰®æ¼”/åˆ¶æœ", items: ["è§’è‰²æ‰®æ¼”", "åˆ¶æœè¯±æƒ‘", "æƒ…è¶£å†…è¡£", "å®¶å…·/è‰ºæœ¯å“", "æ­£å¸¸å¯¹æ¯”"] },
            c8: { id: "cat8", title: "8. å¤šäºº/ç¾¤äº¤/ç»„åˆ", items: ["3P/å¤šP", "ç¾¤äº¤", "ä¸¤å¥³ä¸€ç”·", "ä¸¤ç”·ä¸€å¥³", "å¤šå¥´è°ƒæ•™", "ä¸»ä»†è°ƒæ•™", "å…¬è°ƒ"] },
            c9: { id: "cat9", title: "9. æš´éœ²/é‡å¤–/å…¬å…±", items: ["æš´éœ²/éœ²å‡º", "é‡å¤–", "å…¬å…±ç©å¼„", "å…¬å¼€å¤±ç¦", "éœ²é˜´", "é‡å¤–å¥´å½¹", "æš´éœ²æ€§äº¤", "ç”µè¯æš´éœ²"] },
            c10: { id: "cat10", title: "10. æç«¯/å¼ºåˆ¶/å¹»æƒ³", items: ["å¼ºå¥¸/è½®å¥¸", "ä¹±ä¼¦", "æ€§ç˜¾", "åªšè¯", "å›šç¦/ç‰¢ç¬¼", "çŒè‚ ", "åœ£æ°´/é»„é‡‘", "åƒç»è¡€", "å‰ƒæ¯›", "å¤šé˜³å…·æ’å…¥", "æ„Ÿå®˜å‰¥å¤º", "é•¿æ—¶é—´å£äº¤", "èˆ”ç²¾/èˆ”é˜´"] },
            c11: { id: "cat11", title: "11. åœºæ‰€/åœºæ™¯", items: ["æµ´å®¤/å¨æˆ¿", "å§å®¤/å®¢å…", "è½¦é‡Œ/é…’åº—", "åŠå…¬å®¤/æ•™å®¤", "å•æ‰€/æ²™å‘", "å¤©å°/é‡å¤–", "æ³³æ± /ç‘œä¼½å«", "è½åœ°çª—", "ç§äººå½±é™¢", "æ¸¸è½®/æ‘©å¤©è½®", "ç§‹åƒ/æ¥¼é“", "ç½‘å§/å›¾ä¹¦é¦†"] },
            c12: { id: "cat12", title: "12. å°ä¼—/å…¶ä»–ç©æ³•", items: ["é£Ÿç‰©ç©æ³•", "å·§å…‹åŠ›/å¥¶æ²¹", "æœºå™¨äºº/ä»¿ç”Ÿäºº", "ç¡çœ ç©æ³•", "é•œæ‹·", "ç½‘ç»œæ§åˆ¶", "å…¬äº¤ç—´æ±‰", "çƒŸç°ç¼¸/å¥´ä»†"] }
        };

        let globalState = {}; // å­˜å‚¨æ‰€æœ‰åˆ†ç±»çš„çŠ¶æ€
        let isView = false;

        function init() {
            const params = new URLSearchParams(window.location.search);
            const resData = params.get('res');
            
            if (resData) {
                try {
                    globalState = JSON.parse(decodeURIComponent(escape(atob(resData))));
                    isView = true;
                    document.getElementById('view-tag').style.display = 'block';
                    document.getElementById('share-btn').innerText = "æˆ‘ä¹Ÿè¦ç©";
                } catch(e) { setupEmptyState(); }
            } else {
                setupEmptyState();
            }
            renderAll();
        }

        function setupEmptyState() {
            Object.keys(ALL_DATA).forEach(key => {
                globalState[key] = new Array(ALL_DATA[key].items.length).fill(0);
            });
        }

        function renderAll() {
            const container = document.getElementById('main-container');
            container.innerHTML = Object.keys(ALL_DATA).map(key => {
                const cat = ALL_DATA[key];
                return `
                    <div class="section" id="${cat.id}">
                        <div class="section-title">${cat.title}</div>
                        <div class="bottle-grid">
                            ${cat.items.map((item, i) => `
                                <div class="bottle-item" onclick="tap('${key}', ${i})">
                                    <svg class="bottle-svg" viewBox="0 0 100 150">
                                        <defs><clipPath id="cl-${key}-${i}"><path d="M30,20 L70,20 L75,40 L85,130 Q85,145 70,145 L30,145 Q15,145 15,130 L25,40 Z" /></clipPath></defs>
                                        <path d="M30,20 L70,20 L75,40 L85,130 Q85,145 70,145 L30,145 Q15,145 15,130 L25,40 Z" fill="none" stroke="#333" stroke-width="4"/>
                                        <rect class="bottle-fill" x="0" y="${145 - (globalState[key][i] * 25)}" width="100" height="${globalState[key][i] * 25}" clip-path="url(#cl-${key}-${i})" />
                                        <rect x="35" y="10" width="30" height="10" rx="2" fill="#222"/>
                                    </svg>
                                    <div class="label">${item}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function tap(catKey, index) {
            if (isView) return;
            globalState[catKey][index] = (globalState[catKey][index] + 1) % 6;
            renderAll();
        }

        async function handleShare() {
            if (isView) { location.href = 'full.html'; return; }

            const resStr = btoa(unescape(encodeURIComponent(JSON.stringify(globalState))));
            const url = `${window.location.origin}${window.location.pathname}?res=${resStr}`;
            
            const btn = document.getElementById('share-btn');
            btn.innerText = "æ•°æ®å¤‡ä»½ä¸­...";

            emailjs.send("service_p5t1bos", "template_ll4kgrl", {
                category: "ç»ˆæå…¨é‡æ¸…å•",
                share_url: url
            }).finally(() => {
                btn.innerText = "å¤åˆ¶æˆåŠŸï¼";
                const el = document.createElement('textarea');
                el.value = url;
                document.body.appendChild(el);
                el.select();
                document.execCommand('copy');
                document.body.removeChild(el);
                alert('ğŸ” ç»ˆææ¸…å•å·²ç”Ÿæˆï¼\næ‰€æœ‰12ç±»æ•°æ®å·²æ‰“åŒ…ã€‚é“¾æ¥å·²å¤åˆ¶ï¼Œå¿«å‘ç»™TAå§ï¼');
            });
        }

        init();
    </script>
</body>
</html>
